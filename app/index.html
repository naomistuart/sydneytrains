<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
    <script src='geojson.js'></script>
    <script src='trainpaths.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }

      .marker {
        background-size: cover;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        cursor: pointer;
      }
    </style>
</head>
<body>

<div id='map'></div>

<script>

mapboxgl.accessToken = 'pk.eyJ1IjoibmFvbWkzMjIiLCJhIjoiY2p2YTZkendhMDE5bTN5cGM0ZzZvYzl4ciJ9.tgmyJUIOghvHh3B0awUdEw';

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v10',
  center: [151.2, -33.9],
  zoom: 11
});

// add markers to map
geojson.features.forEach(function(marker) {

// create a HTML element for each feature
var el = document.createElement('div');
el.className = 'marker';
el.style.backgroundImage = 'url(' + marker.properties.trainline + ')'

// make a marker for each feature and add to the map
new mapboxgl.Marker(el)
  .setLngLat(marker.geometry.coordinates)
  .addTo(map);
});

// add train paths
map.on('load', function () {
 
 map.addLayer({
 "id": "route",
 "type": "line",
 "source": {
 "type": "geojson",
 "data": {
 "type": "Feature",
 "properties": {},
 "geometry": {
 "type": "LineString",
 "coordinates": [[151.248981, -33.891303], [151.247543, -33.891201], [151.245492, -33.890544], [151.244507, -33.889961], [151.24402, -33.88972], [151.243611, -33.889091], [151.243278, -33.888432], [151.242806, -33.886594], [151.24283, -33.88458], [151.24184, -33.88228], [151.24056, -33.88105], [151.23971, -33.88061], [151.23817, -33.88007], [151.23669, -33.87955], [151.23497, -33.878958], [151.23262, -33.87764], [151.231812, -33.877281], [151.231277, -33.87714], [151.228302, -33.87674], [151.225922, -33.876251], [151.22524, -33.87599], [151.22431, -33.87559], [151.223, -33.87504], [151.21991, -33.873291], [151.219177, -33.87278], [151.218582, -33.87207], [151.217575, -33.87059], [151.216873, -33.86969], [151.216476, -33.869282], [151.215424, -33.868591], [151.214661, -33.868271], [151.214172, -33.86813], [151.213394, -33.868], [151.211273, -33.867775], [151.210556, -33.867641], [151.209417, -33.867886], [151.20885, -33.868278], [151.2085, -33.868817], [151.20758, -33.87068], [151.207153, -33.87236], [151.206924, -33.87286], [151.206726, -33.874191], [151.206284, -33.875622], [151.206094, -33.876583], [151.206108, -33.877156], [151.206117, -33.87775], [151.206272, -33.878372], [151.206683, -33.879167], [151.207717, -33.880878], [151.208308, -33.882219], [151.2076152, -33.8835156], [151.206479, -33.884924], [151.204636, -33.886559], [151.2026906, -33.8877776], [151.201736, -33.888931], [151.200836, -33.889999], [151.1996821, -33.8917669], [151.1987955, -33.8937296], [151.1981732, -33.8951545], [151.1980123, -33.8961786], [151.196993, -33.8970068], [151.1952764, -33.897363], [151.1913175, -33.8973987], [151.1893112, -33.8976925], [151.1873478, -33.8984228], [151.18573, -33.89949], [151.185471, -33.90052], [151.184326, -33.904381], [151.183823, -33.905209], [151.183304, -33.905781], [151.182114, -33.906689], [151.175217, -33.908909], [151.173676, -33.909721], [151.1666685, -33.9143817], [151.1660153, -33.9147555], [151.164597, -33.915745], [151.164322, -33.915913], [151.161224, -33.917942], [151.1586, -33.919727], [151.158325, -33.919964], [151.1577, -33.920643], [151.157379, -33.921127], [151.156921, -33.922085], [151.156448, -33.924278], [151.156189, -33.924923], [151.155533, -33.926086], [151.155197, -33.926514], [151.153931, -33.927792], [151.1536746, -33.928028], [151.1534104, -33.9283396], [151.150818, -33.930801], [151.149582, -33.932255], [151.148834, -33.933552], [151.147797, -33.935478], [151.146271, -33.938656], [151.146118, -33.938923], [151.14566, -33.939587], [151.145264, -33.940002], [151.142334, -33.942513], [151.141586, -33.943321], [151.141022, -33.944244], [151.136169, -33.953476], [151.134415, -33.956951], [151.132034, -33.964184], [151.131577, -33.965034], [151.131012, -33.965759], [151.13028, -33.96645], [151.129517, -33.966934], [151.127853, -33.967602], [151.118164, -33.96954], [151.116501, -33.969822], [151.11557, -33.969879], [151.114944, -33.969803], [151.114258, -33.969662], [151.111511, -33.968845], [151.111008, -33.96867], [151.110489, -33.968559], [151.109833, -33.968441], [151.109283, -33.968391], [151.108398, -33.968399], [151.106323, -33.968498], [151.105667, -33.96846], [151.104706, -33.968323], [151.103653, -33.967945], [151.101013, -33.966595], [151.099838, -33.96595], [151.099197, -33.965683], [151.098785, -33.965557], [151.098419, -33.965458], [151.098038, -33.965374], [151.097595, -33.965305], [151.097183, -33.965248], [151.096786, -33.965218], [151.096359, -33.965202], [151.095779, -33.96524], [151.088242, -33.966328], [151.087479, -33.966503], [151.085709, -33.96714], [151.084259, -33.967915], [151.082733, -33.969112], [151.081711, -33.970261], [151.080963, -33.971401], [151.080475, -33.972527], [151.080429, -33.972565], [151.078934, -33.97509], [151.078674, -33.975689], [151.078491, -33.976784], [151.078506, -33.977585], [151.079102, -33.980663], [151.079102, -33.981098], [151.078995, -33.981632], [151.078781, -33.98214], [151.077332, -33.984417], [151.077057, -33.9851], [151.07695, -33.985615], [151.07692, -33.987125], [151.076813, -33.987743], [151.076538, -33.98843], [151.076218, -33.988953], [151.074234, -33.991375], [151.067459, -33.998016], [151.067017, -33.99865], [151.066666, -33.999435], [151.066498, -34.000122], [151.066452, -34.000847], [151.066559, -34.001656], [151.066757, -34.002289], [151.068466, -34.005039], [151.068665, -34.005554], [151.068756, -34.006001], [151.068726, -34.006516], [151.068634, -34.006992], [151.068436, -34.007412], [151.068146, -34.007881], [151.067795, -34.008247], [151.067032, -34.008907], [151.065887, -34.009975], [151.065155, -34.010944], [151.064651, -34.012016], [151.064377, -34.013111], [151.064331, -34.014137], [151.064651, -34.016033], [151.064835, -34.018375], [151.06459, -34.020187], [151.063904, -34.022137], [151.063126, -34.02356], [151.0574585, -34.0314024], [151.0568026, -34.0322567], [151.05574, -34.033703], [151.055603, -34.034061], [151.055511, -34.034508], [151.055588, -34.035183], [151.055725, -34.035557], [151.055862, -34.035805], [151.056076, -34.036102], [151.056305, -34.03632], [151.05661, -34.036537], [151.057083, -34.036762], [151.057617, -34.036903], [151.05801400000001, -34.036945], [151.058334, -34.036934], [151.058899, -34.036839], [151.060303, -34.03627], [151.061356, -34.036022], [151.062317, -34.035912], [151.067932, -34.035709], [151.068909, -34.035507], [151.069183, -34.035332], [151.069672, -34.035297], [151.070663, -34.035091], [151.070938, -34.035072], [151.071228, -34.035023], [151.080154, -34.034798], [151.084564, -34.034821], [151.090942, -34.035107], [151.091949, -34.035114], [151.093384, -34.035236], [151.100327, -34.03611], [151.106049, -34.036808], [151.10672, -34.036919], [151.108337, -34.037205], [151.109589, -34.037525], [151.115601, -34.039246], [151.116425, -34.039604], [151.11821, -34.04073], [151.118866, -34.041058], [151.119431, -34.041264], [151.11998, -34.041401], [151.120667, -34.041508], [151.121765, -34.041527], [151.122467, -34.041615], [151.123962, -34.041668], [151.125076, -34.041851], [151.125671, -34.041996], [151.137039, -34.046001], [151.139099, -34.046696], [151.139542, -34.046818], [151.140289, -34.046963], [151.142944, -34.047352], [151.143661, -34.047588], [151.144165, -34.047779], [151.145309, -34.048389], [151.145813, -34.048897], [151.146973, -34.050449], [151.147675, -34.051113], [151.150299, -34.053028], [151.150589, -34.053322], [151.150818, -34.053623], [151.15097, -34.053932], [151.151321, -34.055683]]
 }
 }
 },
 "layout": {
 "line-join": "round",
 "line-cap": "round"
 },
 "paint": {
 "line-color": "#005AA3",
 "line-width": 3
 }
 });
 });



</script>

</body>
</html>